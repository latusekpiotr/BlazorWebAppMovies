# Copilot Instructions for BlazorWebAppMovies

## Project Overview

BlazorWebAppMovies is a sample **Blazor Server application** built with **.NET 8** that demonstrates a complete movie database management system. This application serves as a tutorial sample for learning Blazor web development.

### Technology Stack

- **Framework**: .NET 8
- **Application Type**: Blazor Server App (Server-side rendering with SignalR real-time communication)
- **Database**: Entity Framework Core with InMemory database provider
- **UI Framework**: Bootstrap 5 with custom CSS
- **Data Components**: Microsoft QuickGrid for data display and pagination
- **Hosting**: Configured for Azure App Service deployment

### Key Features

- Full CRUD operations for movie management
- Server-side interactive components
- Real-time UI updates via SignalR
- Responsive design with Bootstrap
- In-memory database with automatic data seeding
- Component-based architecture

## Project Structure

```
BlazorWebAppMovies/
├── Components/
│   ├── Layout/           # Layout components (MainLayout, NavMenu)
│   ├── Pages/            # Routable page components
│   │   └── MoviePages/   # Movie-specific CRUD pages
│   ├── App.razor         # Root component
│   └── _Imports.razor    # Global using statements
├── Data/                 # Entity Framework context and data seeding
├── Models/               # Entity models and data transfer objects
├── wwwroot/              # Static web assets (CSS, JS, images)
├── infrastructure/       # Azure deployment configuration (Bicep)
└── Program.cs            # Application entry point and service configuration
```

## Development Guidelines

### CSS Styling Rules

**IMPORTANT**: When creating CSS styles for Blazor components at the page level:

1. **Always create separate `.razor.css` files** for component-specific styles
2. **Never add CSS styles directly in the `.razor` markup files**
3. **File naming convention**: For a component named `MyPage.razor`, create a corresponding `MyPage.razor.css` file
4. **Create the CSS file if it doesn't exist** when styles need to be added

#### Examples:
- `Components/Pages/Home.razor` → `Components/Pages/Home.razor.css`
- `Components/Pages/MoviePages/Index.razor` → `Components/Pages/MoviePages/Index.razor.css`
- `Components/Layout/MainLayout.razor` → `Components/Layout/MainLayout.razor.css`

#### CSS Scoping:
- Styles in `.razor.css` files are automatically scoped to their component
- Use `::deep` selector to style child components when necessary
- Global styles should go in `wwwroot/app.css`

### Component Development Patterns

#### Page Components
- Use `@page` directive for routable components
- Place in `Components/Pages/` directory
- Follow RESTful URL patterns (e.g., `/Movies/Create`, `/Movies/Edit/{id}`)

#### Data Binding
- Use `@bind-Value` for two-way data binding
- Implement `EditForm` with `DataAnnotationsValidator` for form validation
- Use `ValidationMessage` components for field-level error display

#### Database Operations
- Inject `IDbContextFactory<BlazorWebAppMoviesContext>` for database access
- Use `using` statements with `DbFactory.CreateDbContext()` for proper disposal
- Implement async methods with `await` for database operations

#### Navigation
- Inject `NavigationManager` for programmatic navigation
- Use `NavigateTo()` method for redirects after form submissions

### Entity Framework Patterns

#### Context Usage
```csharp
[Inject] private IDbContextFactory<BlazorWebAppMoviesContext> DbFactory { get; set; } = default!;

// In methods:
using var context = DbFactory.CreateDbContext();
var movies = await context.Movie.ToListAsync();
```

#### Data Seeding
- Automatic seeding occurs in `Program.cs` using `SeedData.Initialize()`
- Sample movie data is provided for development and testing

### Security and Validation

- Use `DataAnnotations` attributes on model properties for validation
- Implement server-side validation with `DataAnnotationsValidator`
- Use `ValidateAntiForgeryToken` for form submissions (automatic with `EditForm`)

### Bootstrap Integration

- Utilize Bootstrap 5 classes for responsive design
- Common classes: `container`, `row`, `col-md-*`, `form-control`, `btn`, `table`
- Custom styles in separate `.razor.css` files complement Bootstrap

### Azure Deployment

- Infrastructure as Code using Bicep templates in `infrastructure/` folder
- Configured for Azure App Service with Linux containers
- Environment-specific configuration through appsettings files

## Code Style Guidelines

### C# Conventions
- Use nullable reference types (`<Nullable>enable</Nullable>`)
- Follow async/await patterns for I/O operations
- Use implicit using statements where appropriate
- Implement proper error handling and validation

### Razor Syntax
- Use `@code` blocks for component logic
- Prefer `@bind-Value` over manual event handling
- Use `@inject` directive for dependency injection
- Implement `IDisposable` when managing resources

### File Organization
- Group related components in subdirectories
- Maintain consistent naming conventions
- Keep component files focused and single-purpose

## Common Development Tasks

### Adding a New Entity
1. Create model in `Models/` folder
2. Add DbSet to `BlazorWebAppMoviesContext`
3. Update seed data if needed
4. Create CRUD pages in appropriate subfolder
5. Add navigation menu items

### Creating New Components
1. Place in appropriate `Components/` subdirectory
2. Create corresponding `.razor.css` file for styles
3. Follow existing patterns for data binding and validation
4. Register services in `Program.cs` if needed

### Debugging and Testing
- Use browser developer tools for client-side debugging
- Leverage SignalR logging for real-time communication issues
- Test responsive design across different screen sizes
- Validate form submissions and error handling